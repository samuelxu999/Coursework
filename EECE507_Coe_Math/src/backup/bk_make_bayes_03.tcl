#!/usr/bin/tclsh

#calculate probability distribution for selected letter string
proc cal_array_prob	info_string {
	#set data [exec ./sort_statistic.sh alice30.txt | head -30]
	#set data [string toupper [regsub -all {[^A-Za-z]} [read stdin] ""]]
	set data [string toupper [read stdin] ]
	#puts "$info_string"
	puts "array set Pr_array { [ join $data ] }"
	#puts $data
	set i 0
	#foreach x $data {		
	#	lappend loutput $x		
	#}
	
	#foreach x y loutput {		
	#	puts "$x\t$y"		
	#}
	
}


proc cal_prob  type_sample {
	#A-Alice.txt P[S|A]
	#if { $type_sample=="A" } {
        	array set Pr_array_A { THE 0.055779 AND 0.029334 TO 0.026518 A 0.022495 I 0.019861 IT 0.019276 SHE 0.018617 OF 0.018288 SAID 0.016679 ALICE 0.014448 IN 0.013021 WAS 0.012875 YOU 0.012619 THAT 0.010059 AS 0.008998 HER 0.008888 T 0.007901 AT 0.007388 S 0.007132 ON 0.006913 HAD 0.006474 WITH 0.006401 ALL 0.006328 BE 0.005304 FOR 0.005121 BUT 0.004865 THEY 0.004755 NOT 0.004718 VERY 0.004609 LITTLE 0.004572 SO 0.004535 OUT 0.004243 THIS 0.004133 THE 0.003950 HE 0.003694 DOWN 0.003621 UP 0.003584 IS 0.003548 ABOUT 0.003438 HIS 0.003438 ONE 0.003438 WHAT 0.003402 THEM 0.003219 KNOW 0.003182 WERE 0.003109 LIKE 0.003072 AGAIN 0.003036 HERSELF 0.003036 WENT 0.003036 IF 0.002853 OR 0.002780 QUEEN 0.002707 THOUGHT 0.002707 COULD 0.002670 HAVE 0.002670 THEN 0.002634 WOULD 0.002560 NO 0.002524 WHEN 0.002524 DO 0.002487 TIME 0.002487 AND 0.002451 INTO 0.002451 SEE 0.002414 THERE 0.002377 IT 0.002341 OFF 0.002268 KING 0.002231 ME 0.002231 DID 0.002195 TURTLE 0.002158 BEGAN 0.002121 M 0.002121 CAN 0.002085 ITS 0.002048 LL 0.002048 MOCK 0.002048 WAY 0.002048 GRYPHON 0.002012 HATTER 0.002012 MY 0.002012 BY 0.001975 QUITE 0.001939 YOUR 0.001939 AN 0.001902 DON 0.001865 MUCH 0.001865 SAY 0.001865 YOU 0.001865 HEAD 0.001829 THEIR 0.001829 THINK 0.001829 THING 0.001792 NOW 0.001756 SOME 0.001756 WHO 0.001756 GO 0.001719 MORE 0.001719 ONLY 0.001719 VOICE 0.001719 GOT 0.001646 JUST 0.001646 LOOKED 0.001646 RABBIT 0.001646 ARE 0.001609 FIRST 0.001609 GET 0.001609 VE 0.001573 NEVER 0.001536 WHAT 0.001536 DUCHESS 0.001500 MUST 0.001500 ROUND 0.001500 WHICH 0.001500 CAME 0.001463 DORMOUSE 0.001463 HOW 0.001463 OTHER 0.001463 OVER 0.001463 SUCH 0.001463 TONE 0.001463 WELL 0.001463 ANY 0.001426 GREAT 0.001426 HERE 0.001426 HIM 0.001426 SHE 0.001426 BACK 0.001390 BEEN 0.001390 RE 0.001390 AFTER 0.001353 BUT 0.001353 BEFORE 0.001317 OH 0.001280 FROM 0.001244 MARCH 0.001244 LARGE 0.001207 THERE 0.001207 LAST 0.001170 LOOKING 0.001170 TWO 0.001170 HARE 0.001134 LONG 0.001134 MOMENT 0.001134 ONCE 0.001134 PUT 0.001134 THINGS 0.001134 DOOR 0.001097 FOUND 0.001097 HEARD 0.001097 MADE 0.001097 MOUSE 0.001097 NOTHING 0.001097 RIGHT 0.001097 DAY 0.001061 EYES 0.001061 REPLIED 0.001061 DEAR 0.001024 LOOK 0.001024 MIGHT 0.001024 NEXT 0.001024 THREE 0.001024 CATERPILLAR 0.000988 D 0.000988 GOING 0.000988 HOW 0.000988 MAKE 0.000988 SEEMED 0.000988 SHOULD 0.000988 SO 0.000988 TELL 0.000988 THAT 0.000988 WHY 0.000988 CAT 0.000951 COURSE 0.000951 GOOD 0.000951 UPON 0.000951 WITHOUT 0.000951 WON 0.000951 AWAY 0.000914 COME 0.000914 POOR 0.000914 RATHER 0.000914 TOO 0.000914 SOON 0.000878 WILL 0.000878 ADDED 0.000841 FELT 0.000841 SAME 0.000841 SHALL 0.000841 THAN 0.000841 TOOK 0.000841 WE 0.000841 WELL 0.000841 ANOTHER 0.000805 GETTING 0.000805 HALF 0.000805 JURY 0.000805 WHITE 0.000805 COME 0.000768 FIND 0.000768 MINUTE 0.000768 THEN 0.000768 THEY 0.000768 TILL 0.000768 WISH 0.000768 WORDS 0.000768 YET 0.000768 CRIED 0.000732 EVER 0.000732 HAND 0.000732 HE 0.000732 NO 0.000732 SORT 0.000732 SURE 0.000732 WHILE 0.000732 ANYTHING 0.000695 BEING 0.000695 CURIOUS 0.000695 FEET 0.000695 TRIED 0.000695 ENOUGH 0.000658 HOUSE 0.000658 TAKE 0.000658 TEA 0.000658 USE 0.000658 WONDER 0.000658 A 0.000622 AS 0.000622 ASKED 0.000622 COURT 0.000622 EAT 0.000622 END 0.000622 EVEN 0.000622 OLD 0.000622 QUESTION 0.000622 SAT 0.000622 SIDE 0.000622 SOMETHING 0.000622 SPOKE 0.000622 TABLE 0.000622 THIS 0.000622 AM 0.000585 BILL 0.000585 BIT 0.000585 DOESN 0.000585 GARDEN 0.000585 HASTILY 0.000585 IF 0.000585 RAN 0.000585 TALKING 0.000585 TURNED 0.000585 UNDER 0.000585 AIR 0.000549 ARM 0.000549 CALLED 0.000549 DONE 0.000549 FACE 0.000549 HIGH 0.000549 IDEA 0.000549 INDEED 0.000549 LOW 0.000549 SAYING 0.000549 SEEN 0.000549 WHO 0.000549 YOU 0.000549 ANXIOUSLY 0.000512 BABY 0.000512 BECAUSE 0.000512 BEGINNING 0.000512 BETTER 0.000512 BOTH 0.000512 DIDN 0.000512 DINAH 0.000512 HEAR 0.000512 ITSELF 0.000512 KNEW 0.000512 LEFT 0.000512 MAD 0.000512 MOUSE 0.000512 NEAR 0.000512 OUGHT 0.000512 PERHAPS 0.000512 REMEMBER 0.000512 SAW 0.000512 SEA 0.000512 SET 0.000512 TALK 0.000512 TRYING 0.000512 US 0.000512 BEHIND 0.000475 CATS 0.000475 CERTAINLY 0.000475 CHANGE 0.000475 CLOSE 0.000475 COOK 0.000475 DANCE 0.000475 DO 0.000475 DODO 0.000475 FAR 0.000475 }
	#}
	#B-moby.txt P[S|B]
	#if { $type_sample=="B" } {
		array set Pr_array_B { THE 0.077209 OF 0.046797 AND 0.030953 TO 0.023424 IN 0.021958 A 0.019523 IS 0.012243 THE 0.008555 THAT 0.008292 WAS 0.008096 WITH 0.007908 BY 0.007707 IT 0.007505 AS 0.007169 BE 0.007046 OR 0.006991 I 0.006585 FOR 0.006240 FROM 0.005485 WHICH 0.005243 ON 0.004705 ARE 0.004483 HIS 0.004395 AT 0.004275 HE 0.004209 HAD 0.004103 MAY 0.004099 NOT 0.003886 WERE 0.003593 AN 0.003288 YOU 0.003253 HAVE 0.002996 BUT 0.002873 THIS 0.002820 THEIR 0.002787 IN 0.002741 S 0.002616 ALL 0.002570 THEY 0.002454 IT 0.002416 ONE 0.002348 BEEN 0.002201 INTO 0.002146 SO 0.002065 THERE 0.001983 MY 0.001931 ITS 0.001889 UPON 0.001860 WHO 0.001856 HER 0.001819 MORE 0.001812 HAS 0.001772 WHEN 0.001733 OTHER 0.001639 SAID 0.001632 NO 0.001544 UP 0.001500 SUCH 0.001494 OUT 0.001485 HIM 0.001481 THEM 0.001426 SHOULD 0.001425 ME 0.001414 AMERICAN 0.001320 IF 0.001320 OVER 0.001292 THAN 0.001283 ANY 0.001269 SOME 0.001197 WOULD 0.001182 TIME 0.001162 WE 0.001147 COULD 0.001135 HE 0.001135 ONLY 0.001135 SHE 0.001135 A 0.001120 WILL 0.001101 AFTER 0.001089 BONE 0.001089 GOVERNMENT 0.001083 MOST 0.001046 VERY 0.001046 MADE 0.001039 TISSUE 0.001030 UNDER 0.001026 DISEASE 0.001013 FIRST 0.001006 WHEN 0.000995 ABOUT 0.000986 THIS 0.000982 MAN 0.000973 SKIN 0.000969 TWO 0.000967 THOSE 0.000960 MUST 0.000951 BEFORE 0.000938 SHALL 0.000927 LITTLE 0.000922 USUALLY 0.000890 UNITED 0.000889 THEN 0.000881 ALSO 0.000879 DOWN 0.000877 THESE 0.000877 WHAT 0.000876 DO 0.000868 BEING 0.000863 STATES 0.000863 YOUR 0.000863 BLOOD 0.000852 PART 0.000846 HOLMES 0.000844 NEW 0.000837 LONG 0.000833 CAN 0.000824 YEARS 0.000824 THROUGH 0.000819 FORM 0.000813 NEW 0.000811 CONGRESS 0.000804 THEY 0.000800 DID 0.000793 AGAINST 0.000789 IF 0.000777 SAME 0.000773 CASES 0.000769 GREAT 0.000764 OUR 0.000751 STATES 0.000736 THERE 0.000736 BETWEEN 0.000720 MET 0.000714 WAY 0.000710 YOU 0.000698 STATE 0.000694 WELL 0.000690 PATIENT 0.000685 EVEN 0.000681 PLACE 0.000679 WITHOUT 0.000677 JOINT 0.000666 AS 0.000650 LIKE 0.000648 MR 0.000633 NOW 0.000633 MEN 0.000632 WAR 0.000628 PEOPLE 0.000626 PRESIDENT 0.000624 CASE 0.000620 INFECTION 0.000620 FOUND 0.000615 MANY 0.000609 CAME 0.000606 HAND 0.000600 POWER 0.000600 SMALL 0.000595 WHERE 0.000593 OLD 0.000586 HOWEVER 0.000584 COUNTRY 0.000580 SEE 0.000576 LARGE 0.000571 RESULT 0.000569 PP 0.000564 OFTEN 0.000560 OWN 0.000556 FACE 0.000553 AND 0.000551 UNTIL 0.000549 BECOME 0.000542 MUCH 0.000538 LAW 0.000536 WHILE 0.000536 ENGLAND 0.000529 NERVE 0.000529 KNOW 0.000527 TREATMENT 0.000527 ROOM 0.000525 FEW 0.000518 WHAT 0.000518 EVERY 0.000516 COME 0.000514 THE 0.000512 SOUTH 0.000510 TAKE 0.000510 THREE 0.000509 TISSUES 0.000509 ILLUSTRATION 0.000507 HOW 0.000505 BUT 0.000501 KNOWN 0.000501 ESPECIALLY 0.000497 US 0.000496 PARTS 0.000494 RIGHT 0.000490 COURSE 0.000486 DAY 0.000486 ON 0.000486 AMERICA 0.000485 END 0.000483 SURFACE 0.000483 EXAMPLE 0.000481 LIFE 0.000477 BRITISH 0.000474 CONDITION 0.000474 DAYS 0.000474 AM 0.000472 WORK 0.000472 BOTH 0.000461 TO 0.000461 BACK 0.000455 WOUND 0.000455 BONES 0.000453 GOOD 0.000453 AWAY 0.000452 FREE 0.000450 STILL 0.000448 MAKE 0.000446 PAIN 0.000442 SOMETIMES 0.000441 LEFT 0.000437 PUBLIC 0.000437 WE 0.000437 GLANDS 0.000435 FORMS 0.000433 BODY 0.000431 THINK 0.000430 USE 0.000430 LAST 0.000428 MIGHT 0.000428 DURING 0.000426 WAR 0.000426 ANOTHER 0.000422 BECOMES 0.000422 WHOLE 0.000422 YOUNG 0.000422 LABOR 0.000420 OFF 0.000415 COMMON 0.000413 VESSELS 0.000413 LAND 0.000409 CAUSE 0.000408 CONSTITUTION 0.000408 LESS 0.000408 SIDE 0.000408 T 0.000406 ONCE 0.000404 CERTAIN 0.000402 NUMBER 0.000398 TUMOUR 0.000398 WOMEN 0.000398 AMONG 0.000397 GENERAL 0.000397 EACH 0.000395 GIVE 0.000393 JUST 0.000393 UNION 0.000393 LIMB 0.000389 CALLED 0.000387 PARTY 0.000386 PRESSURE 0.000384 FRENCH 0.000382 BROUGHT 0.000378 FOLLOWED 0.000378 WEST 0.000378 BUSINESS 0.000374 TOOK 0.000374 WENT 0.000374 POLITICAL 0.000373 SYSTEM 0.000373 MATTER 0.000371 NATIONAL 0.000369 NECESSARY 0.000369 PRESENT 0.000369 PROJECT 0.000367 DUE 0.000365 FAR 0.000365 FORMATION 0.000365 HANDS 0.000365 OPEN 0.000365 OF 0.000363 OPERATION 0.000363 THEN 0.000363 FREQUENTLY 0.000362 TAKEN 0.000362 GROWTH 0.000360 NEVER 0.000360 NORTH 0.000360 PROCESS 0.000360 GO 0.000358 GUTENBERG 0.000358 WITHIN 0.000358 YEAR 0.000358 APPLIED 0.000356 MONEY 0.000356 PIERRE 0.000356 RESULTS 0.000354 TRADE 0.000352 }
	#}
	#set data [string toupper [read stdin]]
	set data [string toupper [regsub -all {[^A-Za-z]} [read stdin] " "]]
	set sum 0
	set sum_wds 0
	#get total count of words in test sample file.
	set total [regexp -all {[^A-Za-z]} $data]
	#puts $total

	foreach wd_sam $data {
		#get Pr[S] for each word
		set subtotal [regexp -all $wd_sam $data]
		set Pr_wd_sam [expr {$subtotal*1.0/$total} ]
		#puts $Pr_wd_sam
		foreach wd_pool_a [array names Pr_array_A] {
			if { $wd_sam==$wd_pool_a } {
				foreach wd_pool_b [array names Pr_array_B] {
					if { $wd_sam==$wd_pool_b } {
						#calucate P[A|S]
						if { $type_sample=="A" } {
							set sum [ expr {$sum+$Pr_wd_sam*$Pr_array_A($wd_sam)/($Pr_array_A($wd_sam)+$Pr_array_B($wd_sam))}]
						}
						#calucate P[B|S]
						if { $type_sample=="B" } {
							set sum [ expr {$sum+$Pr_wd_sam*$Pr_array_B($wd_sam)/($Pr_array_A($wd_sam)+$Pr_array_B($wd_sam))}]
						}
						set sum_wds [expr $sum_wds+1]				
					#puts $Pr_array_A($wd_sam)
					break	
					}
			
				}		
			}	
		}

	}
	puts [expr $sum/$sum_wds]	
}


proc cal_prob_test  type_sample {

array set Pr_array { THE 0.043840 OF 0.036281 AND 0.031746 I 0.024943 A 0.022676 HIS 0.021920 TO 0.021164 IN 0.015873 WAS 0.012850 THE 0.010582 YOU 0.009826 THAT 0.009070 HAD 0.008314 MY 0.008314 HE 0.007559 WITH 0.007559 HAVE 0.006803 IT 0.006803 BUT 0.005291 BY 0.005291 FOR 0.005291 HE 0.005291 HOLMES 0.005291 HOW 0.005291 IS 0.005291 ME 0.005291 NOT 0.005291 OWN 0.005291 WHICH 0.005291 ADVENTURE 0.004535 AS 0.004535 BE 0.004535 BEEN 0.004535 FROM 0.003779 GUTENBERG 0.003779 ON 0.003779 OUT 0.003779 PROJECT 0.003779 SEE 0.003779 UP 0.003779 AGAIN 0.003023 ALL 0.003023 DO 0.003023 HAS 0.003023 HIM 0.003023 IT 0.003023 OR 0.003023 OTHER 0.003023 THIS 0.003023 UPON 0.003023 WERE 0.003023 WHO 0.003023 YOUR 0.003023 A 0.002268 ABOUT 0.002268 ANY 0.002268 ARTHUR 0.002268 AS 0.002268 AT 0.002268 BY 0.002268 CASE 0.002268 CONAN 0.002268 DOYLE 0.002268 FILE 0.002268 HER 0.002268 HIMSELF 0.002268 INTO 0.002268 KNOW 0.002268 LITTLE 0.002268 MORE 0.002268 MY 0.002268 OF 0.002268 ONE 0.002268 PRACTICE 0.002268 SEEN 0.002268 SHE 0.002268 SHERLOCK 0.002268 SIR 0.002268 THE 0.002268 TO 0.002268 WOMAN 0.002268 WOULD 0.002268 YOU 0.002268 ADLER 0.001512 ADVENTURES 0.001512 ADVENTURES 0.001512 ALWAYS 0.001512 AN 0.001512 AND 0.001512 BAKER 0.001512 BEFORE 0.001512 CAN 0.001512 CLEARING 0.001512 COUNTRY 0.001512 DARK 0.001512 DEDUCE 0.001512 DRUG 0.001512 EBOOK 0.001512 EBOOK 0.001512 EBOOKS 0.001512 EMOTION 0.001512 EVERY 0.001512 EXTRAORDINARY 0.001512 EYES 0.001512 FIRST 0.001512 HANDS 0.001512 HEADER 0.001512 HEARD 0.001512 HIS 0.001512 HOLMES 0.001512 HOME 0.001512 IF 0.001512 INFORMATION 0.001512 IRENE 0.001512 KEEN 0.001512 KNEW 0.001512 LATELY 0.001512 LAWS 0.001512 LOOKED 0.001512 MANNER 0.001512 MARCH 0.001512 MIND 0.001512 MOST 0.001512 MUST 0.001512 NATURE 0.001512 OUR 0.001512 OVER 0.001512 PARTICULARLY 0.001512 PLEASE 0.001512 POWERS 0.001512 REMOVE 0.001512 RIGHT 0.001512 ROOMS 0.001512 S 0.001512 SAID 0.001512 SAW 0.001512 SELDOM 0.001512 SHERLOCK 0.001512 SHOULD 0.001512 SINGULAR 0.001512 SOME 0.001512 STREET 0.001512 SUCH 0.001512 TELL 0.001512 THEN 0.001512 THERE 0.001512 THINK 0.001512 THOSE 0.001512 TIME 0.001512 VERY 0.001512 WATSON 0.001512 WEEK 0.001512 WHEN 0.001512 WHERE 0.001512 WHOLE 0.001512 WORK 0.001512 WORLD 0.001512 ABANDONED 0.000756 ABHORRENT 0.000756 ABSORB 0.000756 ACCOMPLISHED 0.000756 ACCOUNT 0.000756 ACROSS 0.000756 ACTIONS 0.000756 ACTIVE 0.000756 ACTIVITY 0.000756 ADDITIONAL 0.000756 ADJUSTED 0.000756 ADMIRABLE 0.000756 ADMIRABLY 0.000756 ADMIT 0.000756 ADVENTURE 0.000756 AGAINST 0.000756 AGO 0.000756 AKIN 0.000756 ALL 0.000756 ALMOST 0.000756 ALSO 0.000756 ALTERNATING 0.000756 AMBITION 0.000756 AMONG 0.000756 ANSWERED 0.000756 ARE 0.000756 ARMCHAIR 0.000756 AROUND 0.000756 ARTHUR 0.000756 ASCII 0.000756 ASSOCIATED 0.000756 ATKINSON 0.000756 ATTENTION 0.000756 ATTITUDE 0.000756 ATTRACTED 0.000756 AUTHOR 0.000756 AWAY 0.000756 BACHELOR 0.000756 BALANCED 0.000756 BAND 0.000756 BE 0.000756 BEECHES 0.000756 BEHIND 0.000756 BELL 0.000756 BERYL 0.000756 BETWEEN 0.000756 BEYOND 0.000756 BLACK 0.000756 BLIND 0.000756 BLUE 0.000756 BOHEMIA 0.000756 BOHEMIA 0.000756 BOHEMIAN 0.000756 BOOKS 0.000756 BOOT 0.000756 BOSCOMBE 0.000756 BOTH 0.000756 BOTTOM 0.000756 BRILLIANTLY 0.000756 BROTHERS 0.000756 BULGE 0.000756 BURIED 0.000756 BURNED 0.000756 BUT 0.000756 BY 0.000756 CAME 0.000756 CARBUNCLE 0.000756 CARELESS 0.000756 CARELESSLY 0.000756 CASE 0.000756 CAUSED 0.000756 CENTRED 0.000756 CENTURIES 0.000756 CERTAINLY 0.000756 CHAMBER 0.000756 CHANGE 0.000756 CHANGED 0.000756 CHANGING 0.000756 CHARACTER 0.000756 CHECK 0.000756 CHEST 0.000756 CHUCKLED 0.000756 CIGARS 0.000756 CIVIL 0.000756 CLASPED 0.000756 CLOTHES 0.000756 CLUES 0.000756 CLUMSY 0.000756 COCAINE 0.000756 COLD 0.000756 COMPANION 0.000756 COMPLETE 0.000756 COMPUTERS 0.000756 CONAN 0.000756 CONTENTS 0.000756 COPPER 0.000756 COPYRIGHT 0.000756 COPYRIGHT 0.000756 CORNER 0.000756 CORONET 0.000756 CRACK 0.000756 CREATED 0.000756 CRIME 0.000756 CRUSTED 0.000756 CUTS 0.000756 DAILY 0.000756 DATE 0.000756 DEAR 0.000756 DEDUCTION 0.000756 DEEPLY 0.000756 DELICATE 0.000756 DELICATELY 0.000756 DESIRE 0.000756 DID 0.000756 DISTRACTING 0.000756 DISTURBING 0.000756 DO 0.000756 DOINGS 0.000756 DONATION 0.000756 DOOR 0.000756 DOUBLE 0.000756 DOUBT 0.000756 DOWNLOADING 0.000756 DOYLE 0.000756 DRAWING 0.000756 DREADFUL 0.000756 DREAMS 0.000756 DRIFTED 0.000756 DROWSINESS 0.000756 DUBIOUS 0.000756 DULL 0.000756 EACH 0.000756 EAGERLY 0.000756 EBOOK 0.000756 ECLIPSES 0.000756 EDGES 0.000756 EDIT 0.000756 EDITING 0.000756 EDITION 0.000756 EFFUSIVE 0.000756 ELECTRONIC 0.000756 EMOTIONS 0.000756 EMPLOYING 0.000756 ENCODING 0.000756 ENERGY 0.000756 ENGINEER 0.000756 ENGLISH 0.000756 ESTABLISHMENT 0.000756 EVEN 0.000756 EVER 0.000756 EXCELLENT 0.000756 EYE 0.000756 FACTOR 0.000756 FACULTIES 0.000756 FAIL 0.000756 FALSE 0.000756 FAMILY 0.000756 FANCY 0.000756 FASHION 0.000756 FELT 0.000756 FEW 0.000756 FIERCE 0.000756 FIGURE 0.000756 FINALLY 0.000756 FIND 0.000756 FINDS 0.000756 FINELY 0.000756 FIRE 0.000756 FIRELIGHT 0.000756 FIVE 0.000756 FOLLOWING 0.000756 FOREFINGER 0.000756 FORM 0.000756 FORMER 0.000756 FORMERLY 0.000756 FREE 0.000756 FRIEND 0.000756 FROM 0.000756 GASOGENE 0.000756 GENTLEMAN 0.000756 GET 0.000756 GETTING 0.000756 GIBE 0.000756 GIRL 0.000756 GIVEN 0.000756 GLAD 0.000756 GO 0.000756 GRIT 0.000756 GUTENBERG 0.000756 HABIT 0.000756 HALF 0.000756 HAPPINESS 0.000756 HARDLY 0.000756 HARNESS 0.000756 HAT 0.000756 HEAD 0.000756 HEADED 0.000756 HENCE 0.000756 HIGH 0.000756 HOLLAND 0.000756 HOPELESS 0.000756 HOT 0.000756 HOW 0.000756 HOWEVER 0.000756 HUMANS 0.000756 IDENTITY 0.000756 II 0.000756 III 0.000756 IMAGINE 0.000756 IMMENSE 0.000756 IMPORTANT 0.000756 IN 0.000756 IN 0.000756 INCIDENTS 0.000756 INCLUDED 0.000756 INCORRIGIBLE 0.000756 INDEED 0.000756 INDEED 0.000756 INDICATED 0.000756 INSIDE 0.000756 INSTRUMENT 0.000756 INTENDED 0.000756 INTERESTS 0.000756 INTRODUCE 0.000756 INTROSPECTIVE 0.000756 INTRUSIONS 0.000756 INVOLVED 0.000756 IODOFORM 0.000756 ITSELF 0.000756 IV 0.000756 IX 0.000756 JANE 0.000756 JOSE 0.000756 JOURNEY 0.000756 JUST 0.000756 JUST 0.000756 KINDLY 0.000756 LANGUAGE 0.000756 LATE 0.000756 LEAGUE 0.000756 LEATHER 0.000756 LED 0.000756 LEFT 0.000756 LEGAL 0.000756 LENSES 0.000756 LIP 0.000756 LIT 0.000756 LIVED 0.000756 LOATHED 0.000756 LODGINGS 0.000756 LONDON 0.000756 LONG 0.000756 LOVE 0.000756 LOVER 0.000756 MACHINE 0.000756 MAKE 0.000756 MALIGNANT 0.000756 MAN 0.000756 MAN 0.000756 MARK 0.000756 MARRIAGE 0.000756 MARY 0.000756 MASTER 0.000756 MAY 0.000756 MEDICAL 0.000756 MEMBER 0.000756 MEMORY 0.000756 MEN 0.000756 MENENDEZ 0.000756 MENTAL 0.000756 MENTION 0.000756 MERELY 0.000756 MESS 0.000756 MIGHT 0.000756 MISSION 0.000756 MOOD 0.000756 MOST 0.000756 MOTIVES 0.000756 MUCH 0.000756 MUD 0.000756 MURDER 0.000756 MYSTERIES 0.000756 MYSTERY 0.000756 NAME 0.000756 NERVOUS 0.000756 NEVER 0.000756 NEW 0.000756 NIGHT 0.000756 NITRATE 0.000756 NOBLE 0.000756 NOTICE 0.000756 NOVEMBER 0.000756 NOW 0.000756 OBSERVATION 0.000756 OBSERVE 0.000756 OBSERVER 0.000756 OBSERVING 0.000756 OBVIOUSLY 0.000756 OCCUPIED 0.000756 ODESSA 0.000756 OFFICIAL 0.000756 OLD 0.000756 ONE 0.000756 ORANGE 0.000756 ORDER 0.000756 PACING 0.000756 PARALLEL 0.000756 PART 0.000756 PASS 0.000756 PASSED 0.000756 PASSIONS 0.000756 PATIENT 0.000756 PERFECT 0.000756 PERMISSION 0.000756 PIPS 0.000756 PLACED 0.000756 PLAIN 0.000756 POLICE 0.000756 POSITION 0.000756 POUNDS 0.000756 POWER 0.000756 PRECISE 0.000756 PREDOMINATES 0.000756 PREPARED 0.000756 PRESS 0.000756 PRINT 0.000756 PROBLEM 0.000756 PROFESSION 0.000756 PROJECT 0.000756 PRONOUNCE 0.000756 PUT 0.000756 QUESTIONABLE 0.000756 RANG 0.000756 READ 0.000756 READABLE 0.000756 READERS 0.000756 REASONER 0.000756 REASONING 0.000756 RECENTLY 0.000756 RED 0.000756 REDISTRIBUTING 0.000756 REIGNING 0.000756 RELEASE 0.000756 REMAINED 0.000756 REMARKED 0.000756 REMEMBERED 0.000756 RESTRICTIONS 0.000756 RESULTS 0.000756 RETURNED 0.000756 RETURNING 0.000756 RIGHTS 0.000756 RISE 0.000756 RISEN 0.000756 ROOM 0.000756 ROUND 0.000756 RUBBED 0.000756 SAVE 0.000756 SCANDAL 0.000756 SCANDAL 0.000756 SCARLET 0.000756 SCENT 0.000756 SCORED 0.000756 SCRAPED 0.000756 SECRETED 0.000756 SEIZED 0.000756 SENSITIVE 0.000756 SERIES 0.000756 SERVANT 0.000756 SET 0.000756 SEVEN 0.000756 SEVEN 0.000756 SEX 0.000756 SHARED 0.000756 SHOE 0.000756 SHOW 0.000756 SHOWN 0.000756 SIDE 0.000756 SIGNS 0.000756 SILHOUETTE 0.000756 SILVER 0.000756 SIMPLICITY 0.000756 SINCE 0.000756 SINCE 0.000756 SIR 0.000756 SIX 0.000756 SLAVEY 0.000756 SLITTING 0.000756 SMALL 0.000756 SMELLING 0.000756 SNEER 0.000756 SO 0.000756 SOCIETY 0.000756 SOFTER 0.000756 SOLE 0.000756 SOMEONE 0.000756 SOUL 0.000756 SPARE 0.000756 SPECIFIC 0.000756 SPECIMEN 0.000756 SPECKLED 0.000756 SPIRIT 0.000756 SPOKE 0.000756 SPOKEN 0.000756 START 0.000756 STETHOSCOPE 0.000756 STILL 0.000756 STOOD 0.000756 STORY 0.000756 STRIKES 0.000756 STRONG 0.000756 STUDY 0.000756 STUDY 0.000756 SUCCESSFULLY 0.000756 SUFFICIENT 0.000756 SUITS 0.000756 SUMMONS 0.000756 SUNK 0.000756 SURE 0.000756 SWIFTLY 0.000756 T 0.000756 TAKE 0.000756 TALL 0.000756 TEMPERAMENT 0.000756 TEXTS 0.000756 THAN 0.000756 THEIR 0.000756 THESE 0.000756 THESE 0.000756 THEY 0.000756 THEY 0.000756 THING 0.000756 THINGS 0.000756 THIS 0.000756 THOUGHT 0.000756 THOUSANDS 0.000756 THREW 0.000756 THROUGH 0.000756 THROW 0.000756 THUMB 0.000756 THURSDAY 0.000756 TITLE 0.000756 TOGETHER 0.000756 TOLD 0.000756 TOO 0.000756 TOP 0.000756 TRAGEDY 0.000756 TRAINED 0.000756 TREPOFF 0.000756 TRIFLE 0.000756 TRINCOMALEE 0.000756 TRUE 0.000756 TWENTIETH 0.000756 TWICE 0.000756 TWISTED 0.000756 UNDER 0.000756 UPDATED 0.000756 US 0.000756 USED 0.000756 V 0.000756 VAGUE 0.000756 VALLEY 0.000756 VANILLA 0.000756 VEIL 0.000756 VI 0.000756 VIEWING 0.000756 VII 0.000756 VIII 0.000756 VILE 0.000756 VOLUNTEERS 0.000756 WALK 0.000756 WALKS 0.000756 WAVED 0.000756 WAY 0.000756 WEATHER 0.000756 WEDLOCK 0.000756 WELCOME 0.000756 WELL 0.000756 WERE 0.000756 WET 0.000756 WHILE 0.000756 WIFE 0.000756 WITH 0.000756 WITHOUT 0.000756 WOOING 0.000756 WORD 0.000756 WORLD 0.000756 WRITTEN 0.000756 X 0.000756 XI 0.000756 XII 0.000756 YET 0.000756 YOURSELF 0.000756 WORD PROBABILITY }
	
	#A-Alice.txt P[S|A]
	#if { $type_sample=="A" } {
        	array set Pr_array_A { THE 0.055779 AND 0.029334 TO 0.026518 A 0.022495 I 0.019861 IT 0.019276 SHE 0.018617 OF 0.018288 SAID 0.016679 ALICE 0.014448 IN 0.013021 WAS 0.012875 YOU 0.012619 THAT 0.010059 AS 0.008998 HER 0.008888 T 0.007901 AT 0.007388 S 0.007132 ON 0.006913 HAD 0.006474 WITH 0.006401 ALL 0.006328 BE 0.005304 FOR 0.005121 BUT 0.004865 THEY 0.004755 NOT 0.004718 VERY 0.004609 LITTLE 0.004572 SO 0.004535 OUT 0.004243 THIS 0.004133 THE 0.003950 HE 0.003694 DOWN 0.003621 UP 0.003584 IS 0.003548 ABOUT 0.003438 HIS 0.003438 ONE 0.003438 WHAT 0.003402 THEM 0.003219 KNOW 0.003182 WERE 0.003109 LIKE 0.003072 AGAIN 0.003036 HERSELF 0.003036 WENT 0.003036 IF 0.002853 OR 0.002780 QUEEN 0.002707 THOUGHT 0.002707 COULD 0.002670 HAVE 0.002670 THEN 0.002634 WOULD 0.002560 NO 0.002524 WHEN 0.002524 DO 0.002487 TIME 0.002487 AND 0.002451 INTO 0.002451 SEE 0.002414 THERE 0.002377 IT 0.002341 OFF 0.002268 KING 0.002231 ME 0.002231 DID 0.002195 TURTLE 0.002158 BEGAN 0.002121 M 0.002121 CAN 0.002085 ITS 0.002048 LL 0.002048 MOCK 0.002048 WAY 0.002048 GRYPHON 0.002012 HATTER 0.002012 MY 0.002012 BY 0.001975 QUITE 0.001939 YOUR 0.001939 AN 0.001902 DON 0.001865 MUCH 0.001865 SAY 0.001865 YOU 0.001865 HEAD 0.001829 THEIR 0.001829 THINK 0.001829 THING 0.001792 NOW 0.001756 SOME 0.001756 WHO 0.001756 GO 0.001719 MORE 0.001719 ONLY 0.001719 VOICE 0.001719 GOT 0.001646 JUST 0.001646 LOOKED 0.001646 RABBIT 0.001646 ARE 0.001609 FIRST 0.001609 GET 0.001609 VE 0.001573 NEVER 0.001536 WHAT 0.001536 DUCHESS 0.001500 MUST 0.001500 ROUND 0.001500 WHICH 0.001500 CAME 0.001463 DORMOUSE 0.001463 HOW 0.001463 OTHER 0.001463 OVER 0.001463 SUCH 0.001463 TONE 0.001463 WELL 0.001463 ANY 0.001426 GREAT 0.001426 HERE 0.001426 HIM 0.001426 SHE 0.001426 BACK 0.001390 BEEN 0.001390 RE 0.001390 AFTER 0.001353 BUT 0.001353 BEFORE 0.001317 OH 0.001280 FROM 0.001244 MARCH 0.001244 LARGE 0.001207 THERE 0.001207 LAST 0.001170 LOOKING 0.001170 TWO 0.001170 HARE 0.001134 LONG 0.001134 MOMENT 0.001134 ONCE 0.001134 PUT 0.001134 THINGS 0.001134 DOOR 0.001097 FOUND 0.001097 HEARD 0.001097 MADE 0.001097 MOUSE 0.001097 NOTHING 0.001097 RIGHT 0.001097 DAY 0.001061 EYES 0.001061 REPLIED 0.001061 DEAR 0.001024 LOOK 0.001024 MIGHT 0.001024 NEXT 0.001024 THREE 0.001024 CATERPILLAR 0.000988 D 0.000988 GOING 0.000988 HOW 0.000988 MAKE 0.000988 SEEMED 0.000988 SHOULD 0.000988 SO 0.000988 TELL 0.000988 THAT 0.000988 WHY 0.000988 CAT 0.000951 COURSE 0.000951 GOOD 0.000951 UPON 0.000951 WITHOUT 0.000951 WON 0.000951 AWAY 0.000914 COME 0.000914 POOR 0.000914 RATHER 0.000914 TOO 0.000914 SOON 0.000878 WILL 0.000878 ADDED 0.000841 FELT 0.000841 SAME 0.000841 SHALL 0.000841 THAN 0.000841 TOOK 0.000841 WE 0.000841 WELL 0.000841 ANOTHER 0.000805 GETTING 0.000805 HALF 0.000805 JURY 0.000805 WHITE 0.000805 COME 0.000768 FIND 0.000768 MINUTE 0.000768 THEN 0.000768 THEY 0.000768 TILL 0.000768 WISH 0.000768 WORDS 0.000768 YET 0.000768 CRIED 0.000732 EVER 0.000732 HAND 0.000732 HE 0.000732 NO 0.000732 SORT 0.000732 SURE 0.000732 WHILE 0.000732 ANYTHING 0.000695 BEING 0.000695 CURIOUS 0.000695 FEET 0.000695 TRIED 0.000695 ENOUGH 0.000658 HOUSE 0.000658 TAKE 0.000658 TEA 0.000658 USE 0.000658 WONDER 0.000658 A 0.000622 AS 0.000622 ASKED 0.000622 COURT 0.000622 EAT 0.000622 END 0.000622 EVEN 0.000622 OLD 0.000622 QUESTION 0.000622 SAT 0.000622 SIDE 0.000622 SOMETHING 0.000622 SPOKE 0.000622 TABLE 0.000622 THIS 0.000622 AM 0.000585 BILL 0.000585 BIT 0.000585 DOESN 0.000585 GARDEN 0.000585 HASTILY 0.000585 IF 0.000585 RAN 0.000585 TALKING 0.000585 TURNED 0.000585 UNDER 0.000585 AIR 0.000549 ARM 0.000549 CALLED 0.000549 DONE 0.000549 FACE 0.000549 HIGH 0.000549 IDEA 0.000549 INDEED 0.000549 LOW 0.000549 SAYING 0.000549 SEEN 0.000549 WHO 0.000549 YOU 0.000549 ANXIOUSLY 0.000512 BABY 0.000512 BECAUSE 0.000512 BEGINNING 0.000512 BETTER 0.000512 BOTH 0.000512 DIDN 0.000512 DINAH 0.000512 HEAR 0.000512 ITSELF 0.000512 KNEW 0.000512 LEFT 0.000512 MAD 0.000512 MOUSE 0.000512 NEAR 0.000512 OUGHT 0.000512 PERHAPS 0.000512 REMEMBER 0.000512 SAW 0.000512 SEA 0.000512 SET 0.000512 TALK 0.000512 TRYING 0.000512 US 0.000512 BEHIND 0.000475 CATS 0.000475 CERTAINLY 0.000475 CHANGE 0.000475 CLOSE 0.000475 COOK 0.000475 DANCE 0.000475 DO 0.000475 DODO 0.000475 FAR 0.000475 }
	#}
	#B-moby.txt P[S|B]
	#if { $type_sample=="B" } {
		array set Pr_array_B { THE 0.077209 OF 0.046797 AND 0.030953 TO 0.023424 IN 0.021958 A 0.019523 IS 0.012243 THE 0.008555 THAT 0.008292 WAS 0.008096 WITH 0.007908 BY 0.007707 IT 0.007505 AS 0.007169 BE 0.007046 OR 0.006991 I 0.006585 FOR 0.006240 FROM 0.005485 WHICH 0.005243 ON 0.004705 ARE 0.004483 HIS 0.004395 AT 0.004275 HE 0.004209 HAD 0.004103 MAY 0.004099 NOT 0.003886 WERE 0.003593 AN 0.003288 YOU 0.003253 HAVE 0.002996 BUT 0.002873 THIS 0.002820 THEIR 0.002787 IN 0.002741 S 0.002616 ALL 0.002570 THEY 0.002454 IT 0.002416 ONE 0.002348 BEEN 0.002201 INTO 0.002146 SO 0.002065 THERE 0.001983 MY 0.001931 ITS 0.001889 UPON 0.001860 WHO 0.001856 HER 0.001819 MORE 0.001812 HAS 0.001772 WHEN 0.001733 OTHER 0.001639 SAID 0.001632 NO 0.001544 UP 0.001500 SUCH 0.001494 OUT 0.001485 HIM 0.001481 THEM 0.001426 SHOULD 0.001425 ME 0.001414 AMERICAN 0.001320 IF 0.001320 OVER 0.001292 THAN 0.001283 ANY 0.001269 SOME 0.001197 WOULD 0.001182 TIME 0.001162 WE 0.001147 COULD 0.001135 HE 0.001135 ONLY 0.001135 SHE 0.001135 A 0.001120 WILL 0.001101 AFTER 0.001089 BONE 0.001089 GOVERNMENT 0.001083 MOST 0.001046 VERY 0.001046 MADE 0.001039 TISSUE 0.001030 UNDER 0.001026 DISEASE 0.001013 FIRST 0.001006 WHEN 0.000995 ABOUT 0.000986 THIS 0.000982 MAN 0.000973 SKIN 0.000969 TWO 0.000967 THOSE 0.000960 MUST 0.000951 BEFORE 0.000938 SHALL 0.000927 LITTLE 0.000922 USUALLY 0.000890 UNITED 0.000889 THEN 0.000881 ALSO 0.000879 DOWN 0.000877 THESE 0.000877 WHAT 0.000876 DO 0.000868 BEING 0.000863 STATES 0.000863 YOUR 0.000863 BLOOD 0.000852 PART 0.000846 HOLMES 0.000844 NEW 0.000837 LONG 0.000833 CAN 0.000824 YEARS 0.000824 THROUGH 0.000819 FORM 0.000813 NEW 0.000811 CONGRESS 0.000804 THEY 0.000800 DID 0.000793 AGAINST 0.000789 IF 0.000777 SAME 0.000773 CASES 0.000769 GREAT 0.000764 OUR 0.000751 STATES 0.000736 THERE 0.000736 BETWEEN 0.000720 MET 0.000714 WAY 0.000710 YOU 0.000698 STATE 0.000694 WELL 0.000690 PATIENT 0.000685 EVEN 0.000681 PLACE 0.000679 WITHOUT 0.000677 JOINT 0.000666 AS 0.000650 LIKE 0.000648 MR 0.000633 NOW 0.000633 MEN 0.000632 WAR 0.000628 PEOPLE 0.000626 PRESIDENT 0.000624 CASE 0.000620 INFECTION 0.000620 FOUND 0.000615 MANY 0.000609 CAME 0.000606 HAND 0.000600 POWER 0.000600 SMALL 0.000595 WHERE 0.000593 OLD 0.000586 HOWEVER 0.000584 COUNTRY 0.000580 SEE 0.000576 LARGE 0.000571 RESULT 0.000569 PP 0.000564 OFTEN 0.000560 OWN 0.000556 FACE 0.000553 AND 0.000551 UNTIL 0.000549 BECOME 0.000542 MUCH 0.000538 LAW 0.000536 WHILE 0.000536 ENGLAND 0.000529 NERVE 0.000529 KNOW 0.000527 TREATMENT 0.000527 ROOM 0.000525 FEW 0.000518 WHAT 0.000518 EVERY 0.000516 COME 0.000514 THE 0.000512 SOUTH 0.000510 TAKE 0.000510 THREE 0.000509 TISSUES 0.000509 ILLUSTRATION 0.000507 HOW 0.000505 BUT 0.000501 KNOWN 0.000501 ESPECIALLY 0.000497 US 0.000496 PARTS 0.000494 RIGHT 0.000490 COURSE 0.000486 DAY 0.000486 ON 0.000486 AMERICA 0.000485 END 0.000483 SURFACE 0.000483 EXAMPLE 0.000481 LIFE 0.000477 BRITISH 0.000474 CONDITION 0.000474 DAYS 0.000474 AM 0.000472 WORK 0.000472 BOTH 0.000461 TO 0.000461 BACK 0.000455 WOUND 0.000455 BONES 0.000453 GOOD 0.000453 AWAY 0.000452 FREE 0.000450 STILL 0.000448 MAKE 0.000446 PAIN 0.000442 SOMETIMES 0.000441 LEFT 0.000437 PUBLIC 0.000437 WE 0.000437 GLANDS 0.000435 FORMS 0.000433 BODY 0.000431 THINK 0.000430 USE 0.000430 LAST 0.000428 MIGHT 0.000428 DURING 0.000426 WAR 0.000426 ANOTHER 0.000422 BECOMES 0.000422 WHOLE 0.000422 YOUNG 0.000422 LABOR 0.000420 OFF 0.000415 COMMON 0.000413 VESSELS 0.000413 LAND 0.000409 CAUSE 0.000408 CONSTITUTION 0.000408 LESS 0.000408 SIDE 0.000408 T 0.000406 ONCE 0.000404 CERTAIN 0.000402 NUMBER 0.000398 TUMOUR 0.000398 WOMEN 0.000398 AMONG 0.000397 GENERAL 0.000397 EACH 0.000395 GIVE 0.000393 JUST 0.000393 UNION 0.000393 LIMB 0.000389 CALLED 0.000387 PARTY 0.000386 PRESSURE 0.000384 FRENCH 0.000382 BROUGHT 0.000378 FOLLOWED 0.000378 WEST 0.000378 BUSINESS 0.000374 TOOK 0.000374 WENT 0.000374 POLITICAL 0.000373 SYSTEM 0.000373 MATTER 0.000371 NATIONAL 0.000369 NECESSARY 0.000369 PRESENT 0.000369 PROJECT 0.000367 DUE 0.000365 FAR 0.000365 FORMATION 0.000365 HANDS 0.000365 OPEN 0.000365 OF 0.000363 OPERATION 0.000363 THEN 0.000363 FREQUENTLY 0.000362 TAKEN 0.000362 GROWTH 0.000360 NEVER 0.000360 NORTH 0.000360 PROCESS 0.000360 GO 0.000358 GUTENBERG 0.000358 WITHIN 0.000358 YEAR 0.000358 APPLIED 0.000356 MONEY 0.000356 PIERRE 0.000356 RESULTS 0.000354 TRADE 0.000352 }
	#}
	#set data [string toupper [read stdin]]
	#set data [string toupper [regsub -all {[^A-Za-z]} [read stdin] " "]]
	set sum 0
	#get total count of words in test sample file.
	#set total [regexp -all {[^A-Za-z]} $data]
	#puts $total

	foreach wd_sam [array names Pr_array] {
		#get Pr[S] for each word
		
		#puts $Pr_wd_sam
		foreach wd_pool_a [array names Pr_array_A] {
			if { $wd_sam==$wd_pool_a } {
				foreach wd_pool_b [array names Pr_array_B] {
					if { $wd_sam==$wd_pool_b } {
						#calucate P[A|S]
						if { $type_sample=="A" } {
							set sum [ expr {$sum+$Pr_array($wd_sam)*$Pr_array_A($wd_sam)/($Pr_array_A($wd_sam)+$Pr_array_B($wd_sam))}]
						}
						#calucate P[B|S]
						if { $type_sample=="B" } {
							set sum [ expr {$sum+$Pr_array($wd_sam)*$Pr_array_B($wd_sam)/($Pr_array_A($wd_sam)+$Pr_array_B($wd_sam))}]
						}					
					#puts $Pr_array_A($wd_sam)
					break	
					}
			
				}		
			}	
		}

	}
	puts $sum
}

lassign $argv type 

if { $type==" " } {
	puts "usage: [sample type-A or B]"
	exit 0
}

#./sort_statistic.sh alice30.txt | head -30 | ./make_bayes.tcl
#cal_array_prob "Test"

cal_prob $type 

#cal_prob_test $type



 



